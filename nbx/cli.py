# AUTOGENERATED! DO NOT EDIT! File to edit: ../notebooks/07_cli.ipynb.

# %% auto 0
__all__ = ['add_argparse', 'test']

# %% ../notebooks/07_cli.ipynb 1
import argparse
import inspect

def add_argparse(f):
    """
    Decorator that automatically adds an argument parser 
    from `f`'s signature, so it can be used from the command line.
    """
    parser = argparse.ArgumentParser(description=f.__doc__)
    sig = inspect.signature(f)
    
    for k,v in sig.parameters.items():
        # FYI: you get the type annotation
        # via `sig.parameters[k].annotation`
        
        if v.default is inspect.Parameter.empty:
            parser.add_argument(k)  
        else:
            parser.add_argument(f"-{k}", f"--{k}", 
                                default=v.default) 
            
    def g():
        args = parser.parse_args()
        f(**vars(args))
        
    return g

# %% ../notebooks/07_cli.ipynb 2
@add_argparse
def test(x, y=2, *, z=3):
    """A docstring for this test function."""
    print(x, y, z)
